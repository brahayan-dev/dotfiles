---
- name: Install Stack
  become: true
  dnf:
    name:
      - java-latest-openjdk
      - npm
      - nodejs
      - python3-pip
      - golang
      - podman
      - podman-compose
      - vagrant
      - dbeaver-ce
    state: present

- name: Install Clojure
  become: true
  block:
    - name: Install Clojure - Download Installer
      get_url:
        url: https://github.com/clojure/brew-install/releases/latest/download/linux-install.sh
        dest: /tmp/clojure-installer.sh
        mode: 0755
    - name: Install Clojure - Run Installer
      shell: /tmp/clojure-installer.sh
      args:
        creates: /usr/local/bin/clojure

- name: Install Babashka
  block:
    - name: Install Babashka - Download Installer
      get_url:
        url: https://raw.githubusercontent.com/babashka/babashka/master/install
        dest: /tmp/babashka
        mode: 0777
    - name: Install Babashka - Run Installer
      become: true
      shell: /tmp/babashka
      args:
        creates: /usr/local/bin/bb

- name: Install Polylith
  become: true
  block:
    - name: Install Polylith - Download Installer
      get_url:
        url: https://github.com/polyfy/polylith/releases/download/v0.2.22/poly-0.2.22.jar
        dest: /usr/local/polylith.jar
        mode: 0777
    - name: Install Polylith - Set Symlink To CLI
      command: >
        ln -s -f
        "/{{ base_dir }}/{{ current_user }}/.dotfiles/polylith"
        /usr/local/bin/polylith
      args:
        creates: /usr/local/bin/polylith
      notify: Reload Zsh Files

- name: Install Bun
  block:
    - name: Install Bun - Download Installer
      get_url:
        url: https://bun.sh/install
        dest: /tmp/bun-installer
        mode: 0777
    - name: Install Bun - Run Installer
      become: true
      shell: /tmp/bun-installer
      args:
        creates: "/{{ base_dir }}/{{ current_user }}/.bun/_bun"
